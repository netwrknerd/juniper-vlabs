2021-01-19 16:41:25,547 -  nornir.core -  WARNING -        run() - Task 'napalm_cli' has not been run â€“ 0 hosts selected
2021-01-19 17:14:45,630 -  nornir.core -     INFO -        run() - Running task 'napalm_cli' with args {'commands': ['show bgp summary', 'show interfaces terse']} on 6 hosts
2021-01-19 17:16:01,028 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'napalm_cli' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/device.py", line 1347, in open
    self._conn = netconf_ssh.connect(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/manager.py", line 168, in connect
    return connect_ssh(*args, **kwds)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/manager.py", line 135, in connect_ssh
    session.connect(*args, **kwds)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/transport/ssh.py", line 291, in connect
    raise SSHError("Could not open socket to %s:%s" % (host, port))
ncclient.transport.errors.SSHError: Could not open socket to 66.129.235.13:35018

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 127, in open
    self.device.open(auto_probe=self.auto_probe)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/device.py", line 1385, in open
    raise EzErrors.ConnectTimeoutError(self)
jnpr.junos.exception.ConnectTimeoutError: ConnectTimeoutError(66.129.235.13)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_napalm/plugins/tasks/napalm_cli.py", line 19, in napalm_cli
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/inventory.py", line 440, in get_connection
    self.open_connection(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/inventory.py", line 492, in open_connection
    conn_obj.open(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_napalm/plugins/connections/__init__.py", line 57, in open
    connection.open()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 129, in open
    raise ConnectionException(cte.msg) from cte
napalm.base.exceptions.ConnectionException: None

2021-01-19 17:16:01,028 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'napalm_cli' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/device.py", line 1347, in open
    self._conn = netconf_ssh.connect(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/manager.py", line 168, in connect
    return connect_ssh(*args, **kwds)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/manager.py", line 135, in connect_ssh
    session.connect(*args, **kwds)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/transport/ssh.py", line 291, in connect
    raise SSHError("Could not open socket to %s:%s" % (host, port))
ncclient.transport.errors.SSHError: Could not open socket to 66.129.235.13:35009

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 127, in open
    self.device.open(auto_probe=self.auto_probe)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/device.py", line 1385, in open
    raise EzErrors.ConnectTimeoutError(self)
jnpr.junos.exception.ConnectTimeoutError: ConnectTimeoutError(66.129.235.13)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_napalm/plugins/tasks/napalm_cli.py", line 19, in napalm_cli
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/inventory.py", line 440, in get_connection
    self.open_connection(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/inventory.py", line 492, in open_connection
    conn_obj.open(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_napalm/plugins/connections/__init__.py", line 57, in open
    connection.open()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 129, in open
    raise ConnectionException(cte.msg) from cte
napalm.base.exceptions.ConnectionException: None

2021-01-19 17:16:01,028 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'napalm_cli' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/device.py", line 1347, in open
    self._conn = netconf_ssh.connect(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/manager.py", line 168, in connect
    return connect_ssh(*args, **kwds)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/manager.py", line 135, in connect_ssh
    session.connect(*args, **kwds)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/transport/ssh.py", line 291, in connect
    raise SSHError("Could not open socket to %s:%s" % (host, port))
ncclient.transport.errors.SSHError: Could not open socket to 66.129.235.13:35015

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 127, in open
    self.device.open(auto_probe=self.auto_probe)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/device.py", line 1385, in open
    raise EzErrors.ConnectTimeoutError(self)
jnpr.junos.exception.ConnectTimeoutError: ConnectTimeoutError(66.129.235.13)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_napalm/plugins/tasks/napalm_cli.py", line 19, in napalm_cli
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/inventory.py", line 440, in get_connection
    self.open_connection(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/inventory.py", line 492, in open_connection
    conn_obj.open(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_napalm/plugins/connections/__init__.py", line 57, in open
    connection.open()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 129, in open
    raise ConnectionException(cte.msg) from cte
napalm.base.exceptions.ConnectionException: None

2021-01-19 17:16:01,028 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'napalm_cli' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/device.py", line 1347, in open
    self._conn = netconf_ssh.connect(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/manager.py", line 168, in connect
    return connect_ssh(*args, **kwds)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/manager.py", line 135, in connect_ssh
    session.connect(*args, **kwds)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/transport/ssh.py", line 291, in connect
    raise SSHError("Could not open socket to %s:%s" % (host, port))
ncclient.transport.errors.SSHError: Could not open socket to 66.129.235.13:35003

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 127, in open
    self.device.open(auto_probe=self.auto_probe)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/device.py", line 1385, in open
    raise EzErrors.ConnectTimeoutError(self)
jnpr.junos.exception.ConnectTimeoutError: ConnectTimeoutError(66.129.235.13)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_napalm/plugins/tasks/napalm_cli.py", line 19, in napalm_cli
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/inventory.py", line 440, in get_connection
    self.open_connection(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/inventory.py", line 492, in open_connection
    conn_obj.open(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_napalm/plugins/connections/__init__.py", line 57, in open
    connection.open()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 129, in open
    raise ConnectionException(cte.msg) from cte
napalm.base.exceptions.ConnectionException: None

2021-01-19 17:16:01,028 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'napalm_cli' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/device.py", line 1347, in open
    self._conn = netconf_ssh.connect(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/manager.py", line 168, in connect
    return connect_ssh(*args, **kwds)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/manager.py", line 135, in connect_ssh
    session.connect(*args, **kwds)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/transport/ssh.py", line 291, in connect
    raise SSHError("Could not open socket to %s:%s" % (host, port))
ncclient.transport.errors.SSHError: Could not open socket to 66.129.235.13:35012

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 127, in open
    self.device.open(auto_probe=self.auto_probe)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/device.py", line 1385, in open
    raise EzErrors.ConnectTimeoutError(self)
jnpr.junos.exception.ConnectTimeoutError: ConnectTimeoutError(66.129.235.13)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_napalm/plugins/tasks/napalm_cli.py", line 19, in napalm_cli
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/inventory.py", line 440, in get_connection
    self.open_connection(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/inventory.py", line 492, in open_connection
    conn_obj.open(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_napalm/plugins/connections/__init__.py", line 57, in open
    connection.open()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 129, in open
    raise ConnectionException(cte.msg) from cte
napalm.base.exceptions.ConnectionException: None

2021-01-19 17:16:01,029 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'napalm_cli' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/device.py", line 1347, in open
    self._conn = netconf_ssh.connect(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/manager.py", line 168, in connect
    return connect_ssh(*args, **kwds)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/manager.py", line 135, in connect_ssh
    session.connect(*args, **kwds)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/transport/ssh.py", line 291, in connect
    raise SSHError("Could not open socket to %s:%s" % (host, port))
ncclient.transport.errors.SSHError: Could not open socket to 66.129.235.13:35006

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 127, in open
    self.device.open(auto_probe=self.auto_probe)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/device.py", line 1385, in open
    raise EzErrors.ConnectTimeoutError(self)
jnpr.junos.exception.ConnectTimeoutError: ConnectTimeoutError(66.129.235.13)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_napalm/plugins/tasks/napalm_cli.py", line 19, in napalm_cli
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/inventory.py", line 440, in get_connection
    self.open_connection(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/inventory.py", line 492, in open_connection
    conn_obj.open(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_napalm/plugins/connections/__init__.py", line 57, in open
    connection.open()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 129, in open
    raise ConnectionException(cte.msg) from cte
napalm.base.exceptions.ConnectionException: None

2021-01-19 17:43:48,597 -  nornir.core -     INFO -        run() - Running task 'napalm_cli' with args {'commands': ['show bgp summary', 'show interfaces terse']} on 6 hosts
2021-01-19 18:41:50,656 -  nornir.core -     INFO -        run() - Running task 'napalm_get' with args {'getters': ['config'], 'retrieve': 'all'} on 6 hosts
2021-01-19 18:43:50,322 -  nornir.core -     INFO -        run() - Running task 'napalm_get' with args {'getters': ['config'], 'retrieve': 'all'} on 6 hosts
2021-01-19 18:44:18,223 -  nornir.core -     INFO -        run() - Running task 'napalm_get' with args {'getters': ['config'], 'retrieve': 'all'} on 6 hosts
2021-01-19 18:45:07,712 -  nornir.core -     INFO -        run() - Running task 'napalm_get' with args {'getters': ['config'], 'retrieve': 'all'} on 6 hosts
2021-01-19 18:45:25,141 -  nornir.core -     INFO -        run() - Running task 'napalm_get' with args {'getters': ['config'], 'retrieve': 'all'} on 6 hosts
2021-01-19 18:45:51,840 -  nornir.core -     INFO -        run() - Running task 'napalm_get' with args {'getters': ['config'], 'retrieve': 'all'} on 6 hosts
2021-01-19 20:17:16,499 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 20:17:16,501 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 115, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 197, in get_source
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: config.j2

2021-01-19 20:17:16,501 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 20:17:32,424 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 20:17:32,426 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 115, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 197, in get_source
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: config.text

2021-01-19 20:17:32,426 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 20:19:30,463 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 20:19:30,470 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ iface }} description {{ ifaces.description}}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

2021-01-19 20:19:30,471 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 20:20:27,947 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 20:20:27,952 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ iface }} description {{ ifaces.description}}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

2021-01-19 20:20:27,952 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}/")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 20:40:41,873 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 20:40:41,877 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ iface }} description {{ ifaces.description}}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

2021-01-19 20:40:41,878 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 20:41:54,566 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 20:41:54,571 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ iface }} description {{ iface.description}}
jinja2.exceptions.UndefinedError: 'str object' has no attribute 'description'

2021-01-19 20:41:54,571 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 20:42:11,523 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 20:42:11,528 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ iface }} description {{ iface.description}}
jinja2.exceptions.UndefinedError: 'str object' has no attribute 'description'

2021-01-19 20:42:11,529 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 20:42:21,174 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 20:42:21,178 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ iface }} description {{ iface.description}}
jinja2.exceptions.UndefinedError: 'str object' has no attribute 'description'

2021-01-19 20:42:21,178 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 20:44:24,682 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 20:44:24,687 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ iface }} description {{ iface.description }}
jinja2.exceptions.UndefinedError: 'str object' has no attribute 'description'

2021-01-19 20:44:24,688 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 20:45:40,908 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 20:45:40,912 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ iface }} description {{ iface.description }}
jinja2.exceptions.UndefinedError: 'str object' has no attribute 'description'

2021-01-19 20:45:40,913 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 20:46:46,095 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 20:46:46,099 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ iface }} description {{ iface.description }}
jinja2.exceptions.UndefinedError: 'str object' has no attribute 'description'

2021-01-19 20:46:46,100 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 20:51:45,449 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 20:52:19,903 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 20:52:19,907 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ iface }} description {{ ifaces.description }}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

2021-01-19 20:52:19,908 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 20:52:29,978 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 20:52:29,983 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ iface }} description {{ ifaces.iface.description }}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

2021-01-19 20:52:29,984 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 20:52:38,951 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 20:52:38,956 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ iface }} description {{ iface.description }}
jinja2.exceptions.UndefinedError: 'str object' has no attribute 'description'

2021-01-19 20:52:38,957 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 20:52:47,119 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 20:52:47,123 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ iface }} description {{ description }}
jinja2.exceptions.UndefinedError: 'description' is undefined

2021-01-19 20:52:47,124 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 20:55:23,361 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 20:55:23,366 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ iface }} description {{ iface.description }}
jinja2.exceptions.UndefinedError: 'str object' has no attribute 'description'

2021-01-19 20:55:23,366 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 20:55:32,059 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 20:55:32,064 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ iface }} description {{ ifaces.description }}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

2021-01-19 20:55:32,064 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 20:55:43,886 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 20:55:43,890 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ iface }} description {{ iface.descriptions }}
jinja2.exceptions.UndefinedError: 'str object' has no attribute 'descriptions'

2021-01-19 20:55:43,891 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 20:56:06,352 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 20:56:06,356 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ iface }} description {{ iface.description }}
jinja2.exceptions.UndefinedError: 'str object' has no attribute 'description'

2021-01-19 20:56:06,357 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 20:58:09,361 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 20:58:09,366 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ int }} description {{ int.description }}
jinja2.exceptions.UndefinedError: 'str object' has no attribute 'description'

2021-01-19 20:58:09,367 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 20:58:50,007 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 20:58:50,012 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ int }} description {{ int.ipv4_address }}
jinja2.exceptions.UndefinedError: 'str object' has no attribute 'ipv4_address'

2021-01-19 20:58:50,012 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 21:11:36,778 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 21:11:36,783 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ int }} description {{ host.int.description }}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'nornir.core.inventory.Host object' has no attribute 'int'

2021-01-19 21:11:36,783 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 21:11:46,290 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 21:11:46,294 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ int }} description {{ host.intf.description }}
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'description'

2021-01-19 21:11:46,295 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 21:13:04,621 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 21:13:04,625 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ int }} description {{ host.intf.description() }}
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'description'

2021-01-19 21:13:04,626 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 21:14:32,070 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 21:14:32,075 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ int }} description {{ host.description() }}
jinja2.exceptions.UndefinedError: 'nornir.core.inventory.Host object' has no attribute 'description'

2021-01-19 21:14:32,075 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 21:14:40,175 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 21:14:40,180 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ int }} description {{ host.int.description() }}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'nornir.core.inventory.Host object' has no attribute 'int'

2021-01-19 21:14:40,180 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 21:14:48,899 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 21:14:48,904 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ int }} description {{ host.intf.description() }}
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'description'

2021-01-19 21:14:48,904 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 21:15:55,156 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 21:15:55,160 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 4, in template
    {% endfor %}
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'endfor' or 'else'. The innermost block that needs to be closed is 'for'.

2021-01-19 21:15:55,161 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 21:16:20,336 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 21:16:20,340 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 1, in top-level template code
    {% for int_name, int in host.intf.iteritems() %}
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'iteritems'

2021-01-19 21:16:20,341 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 21:19:23,797 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 21:19:23,802 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 1, in top-level template code
    {% for int_name, int in host.intf.iteritems() %}
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'iteritems'

2021-01-19 21:19:23,803 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 21:20:26,780 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 21:20:26,785 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 1, in top-level template code
    {% for int_name, int in host.intf.description() %}
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'description'

2021-01-19 21:20:26,786 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 21:20:42,324 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 21:36:55,558 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 21:39:04,561 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 21:40:28,304 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 21:40:28,305 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    print(task.host.ifaces[0])
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/inventory.py", line 314, in __getattribute__
    return object.__getattribute__(self, name)
AttributeError: 'Host' object has no attribute 'ifaces'

2021-01-19 21:41:56,363 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 21:41:56,364 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    print(host.ifaces[0])
NameError: name 'host' is not defined

2021-01-19 21:42:39,640 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 21:42:39,641 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    print(task.host.ifaces[1])
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/inventory.py", line 314, in __getattribute__
    return object.__getattribute__(self, name)
AttributeError: 'Host' object has no attribute 'ifaces'

2021-01-19 21:46:07,796 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 21:47:15,504 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 21:47:15,508 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in template
    set interfaces {{ iface_name [-.0]}} description {{ iface.description }}
jinja2.exceptions.TemplateSyntaxError: unexpected '.'

2021-01-19 21:47:15,509 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 21:47:34,729 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 21:47:34,737 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ iface_name [-'.0'] }} description {{ iface.description }}
TypeError: bad operand type for unary -: 'str'

2021-01-19 21:47:34,737 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 21:47:54,498 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 21:47:54,504 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in top-level template code
    set interfaces {{ iface_name -'.0' }} description {{ iface.description }}
TypeError: unsupported operand type(s) for -: 'str' and 'str'

2021-01-19 21:47:54,505 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 21:48:07,692 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-19 21:48:07,695 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 2, in template
    set interfaces {{ iface_name - .0 }} description {{ iface.description }}
jinja2.exceptions.TemplateSyntaxError: unexpected '.'

2021-01-19 21:48:07,696 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-19 21:54:54,277 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 00:05:42,728 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 00:05:42,733 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 6, in template
    {% for isis_iface_name, isis-iface in host.isis_ifaces.items() %}
jinja2.exceptions.TemplateSyntaxError: expected token 'in', got '-'

2021-01-20 00:05:42,734 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 00:11:20,493 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 00:11:20,497 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 1, in template
    {% for ifacein host.ifaces %}
jinja2.exceptions.TemplateSyntaxError: expected token 'in', got 'host'

2021-01-20 00:11:20,498 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 00:11:36,560 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 00:12:52,205 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Loading configuration on the device' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/device.py", line 1347, in open
    self._conn = netconf_ssh.connect(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/manager.py", line 168, in connect
    return connect_ssh(*args, **kwds)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/manager.py", line 135, in connect_ssh
    session.connect(*args, **kwds)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/transport/ssh.py", line 291, in connect
    raise SSHError("Could not open socket to %s:%s" % (host, port))
ncclient.transport.errors.SSHError: Could not open socket to 66.129.235.3:46003

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 127, in open
    self.device.open(auto_probe=self.auto_probe)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/device.py", line 1385, in open
    raise EzErrors.ConnectTimeoutError(self)
jnpr.junos.exception.ConnectTimeoutError: ConnectTimeoutError(66.129.235.3)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_napalm/plugins/tasks/napalm_configure.py", line 29, in napalm_configure
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/inventory.py", line 440, in get_connection
    self.open_connection(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/inventory.py", line 492, in open_connection
    conn_obj.open(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_napalm/plugins/connections/__init__.py", line 57, in open
    connection.open()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 129, in open
    raise ConnectionException(cte.msg) from cte
napalm.base.exceptions.ConnectionException: None

2021-01-20 00:12:52,206 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 10, in configuration
    task.run(task=napalm_configure, name="Loading configuration on the device", replace=False, configuration=task.host["config"])
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Loading configuration on the device (failed)


2021-01-20 00:33:38,149 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 00:34:53,510 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Loading configuration on the device' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/device.py", line 1347, in open
    self._conn = netconf_ssh.connect(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/manager.py", line 168, in connect
    return connect_ssh(*args, **kwds)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/manager.py", line 135, in connect_ssh
    session.connect(*args, **kwds)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/transport/ssh.py", line 291, in connect
    raise SSHError("Could not open socket to %s:%s" % (host, port))
ncclient.transport.errors.SSHError: Could not open socket to 66.129.235.3:46003

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 127, in open
    self.device.open(auto_probe=self.auto_probe)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/device.py", line 1385, in open
    raise EzErrors.ConnectTimeoutError(self)
jnpr.junos.exception.ConnectTimeoutError: ConnectTimeoutError(66.129.235.3)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_napalm/plugins/tasks/napalm_configure.py", line 29, in napalm_configure
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/inventory.py", line 440, in get_connection
    self.open_connection(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/inventory.py", line 492, in open_connection
    conn_obj.open(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_napalm/plugins/connections/__init__.py", line 57, in open
    connection.open()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 129, in open
    raise ConnectionException(cte.msg) from cte
napalm.base.exceptions.ConnectionException: None

2021-01-20 00:34:53,512 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 10, in configuration
    task.run(task=napalm_configure, name="Loading configuration on the device", replace=False, configuration=task.host["config"])
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Loading configuration on the device (failed)


2021-01-20 01:09:52,608 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:09:52,622 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 19, in template
    {% endfor %}
jinja2.exceptions.TemplateSyntaxError: Encountered unknown tag 'endfor'. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.

2021-01-20 01:09:52,623 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:11:28,735 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:11:28,743 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 15, in top-level template code
    {% if iface in host.ifaces == 'lo0.0' -%}
jinja2.exceptions.UndefinedError: 'iface' is undefined

2021-01-20 01:11:28,743 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:11:56,557 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:11:56,565 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 15, in top-level template code
    {% if iface_name in host.ifaces == 'lo0.0' -%}
jinja2.exceptions.UndefinedError: 'iface_name' is undefined

2021-01-20 01:11:56,565 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:12:22,196 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:12:22,203 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 15, in top-level template code
    {% if iface  == 'lo0.0' -%}
jinja2.exceptions.UndefinedError: 'iface' is undefined

2021-01-20 01:12:22,204 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:13:56,299 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:13:56,306 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 29, in top-level template code
    {% if level in host.isis_ifaces == '1' -%}
jinja2.exceptions.UndefinedError: 'level' is undefined

2021-01-20 01:13:56,306 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:14:54,069 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:14:54,077 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 28, in top-level template code
    {% if level in host.isis_ifaces == '1' -%}
jinja2.exceptions.UndefinedError: 'level' is undefined

2021-01-20 01:14:54,077 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:15:14,984 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:15:14,991 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 28, in top-level template code
    {% if level  == '1' -%}
jinja2.exceptions.UndefinedError: 'level' is undefined

2021-01-20 01:15:14,991 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:18:08,601 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:18:08,609 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 28, in top-level template code
    {% if level  == '1' -%}
jinja2.exceptions.UndefinedError: 'level' is undefined

2021-01-20 01:18:08,609 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:18:56,858 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:18:56,866 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 28, in top-level template code
    {% if level  == '1' -%}
jinja2.exceptions.UndefinedError: 'level' is undefined

2021-01-20 01:18:56,866 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:20:38,479 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:20:41,337 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Loading configuration on the device' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/device.py", line 834, in execute
    rpc_rsp_e = self._rpc_reply(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/decorators.py", line 165, in wrapper
    raise ex
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/decorators.py", line 117, in wrapper
    rsp = function(self, *args, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/device.py", line 1440, in _rpc_reply
    return self._conn.rpc(rpc_cmd_e, filter_xml)._NCElement__doc
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/manager.py", line 226, in execute
    return cls(self._session,
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/operations/third_party/juniper/rpc.py", line 52, in request
    return self._request(rpc)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/operations/rpc.py", line 360, in _request
    raise self._reply.error
ncclient.operations.rpc.RPCError: 
configuration database modified


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/utils/config.py", line 603, in lock
    self.rpc.lock_configuration()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/rpcmeta.py", line 364, in _exec_rpc
    return self._junos.execute(rpc, **dec_args)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/decorators.py", line 76, in wrapper
    return function(*args, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/decorators.py", line 31, in wrapper
    return function(*args, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/device.py", line 854, in execute
    raise EzErrors.RpcError(cmd=rpc_cmd_e, rsp=rsp, errs=ex)
jnpr.junos.exception.RpcError: RpcError(severity: error, bad_element: None, message: configuration database modified)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 150, in _lock
    self.device.cu.lock()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/utils/config.py", line 606, in lock
    raise LockError(rsp=err.rsp)
jnpr.junos.exception.LockError: LockError(severity: error, bad_element: None, message: configuration database modified)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_napalm/plugins/tasks/napalm_configure.py", line 34, in napalm_configure
    device.load_merge_candidate(filename=filename, config=configuration)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 269, in load_merge_candidate
    self._load_candidate(filename, config, False)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 234, in _load_candidate
    self._lock()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 153, in _lock
    raise LockError(str(jle))
napalm.base.exceptions.LockError: LockError(severity: error, bad_element: None, message: configuration database modified)

2021-01-20 01:20:41,338 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 10, in configuration
    task.run(task=napalm_configure, name="Loading configuration on the device", replace=False, configuration=task.host["config"])
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Loading configuration on the device (failed)


2021-01-20 01:21:52,770 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:21:55,147 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Loading configuration on the device' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/device.py", line 834, in execute
    rpc_rsp_e = self._rpc_reply(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/decorators.py", line 165, in wrapper
    raise ex
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/decorators.py", line 117, in wrapper
    rsp = function(self, *args, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/device.py", line 1440, in _rpc_reply
    return self._conn.rpc(rpc_cmd_e, filter_xml)._NCElement__doc
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/manager.py", line 226, in execute
    return cls(self._session,
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/operations/third_party/juniper/rpc.py", line 52, in request
    return self._request(rpc)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/operations/rpc.py", line 358, in _request
    raise RPCError(to_ele(self._reply._raw), errs=errors)
ncclient.operations.rpc.RPCError: error: invalid value
warning: mgd: statement has no contents; ignored
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/utils/config.py", line 490, in try_load
    got = self.rpc.load_config(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/rpcmeta.py", line 288, in load_config
    return self._junos.execute(rpc, ignore_warning=ignore_warning)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/decorators.py", line 76, in wrapper
    return function(*args, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/decorators.py", line 31, in wrapper
    return function(*args, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/device.py", line 854, in execute
    raise EzErrors.RpcError(cmd=rpc_cmd_e, rsp=rsp, errs=ex)
jnpr.junos.exception.RpcError: RpcError(severity: error, bad_element: {, message: error: invalid value
warning: mgd: statement has no contents; ignored
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 249, in _load_candidate
    self.device.cu.load(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/utils/config.py", line 579, in load
    return try_load(rpc_contents, rpc_xattrs, ignore_warning=ignore_warning)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/utils/config.py", line 496, in try_load
    raise ConfigLoadError(cmd=err.cmd, rsp=err.rsp, errs=err.errs)
jnpr.junos.exception.ConfigLoadError: ConfigLoadError(severity: error, bad_element: {, message: error: invalid value
warning: mgd: statement has no contents; ignored
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_napalm/plugins/tasks/napalm_configure.py", line 34, in napalm_configure
    device.load_merge_candidate(filename=filename, config=configuration)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 269, in load_merge_candidate
    self._load_candidate(filename, config, False)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 259, in _load_candidate
    raise MergeConfigException(e.errs)
napalm.base.exceptions.MergeConfigException: [{'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '{', 'message': 'invalid value'}, {'severity': 'warning', 'source': None, 'edit_path': '[edit]', 'bad_element': 'interfaces', 'message': 'mgd: statement has no contents; ignored'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '{', 'message': 'invalid value'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '}', 'message': 'error recovery ignores input until this point'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '}', 'message': 'invalid value'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '}', 'message': 'error recovery ignores input until this point'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '{', 'message': 'invalid value'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '}', 'message': 'error recovery ignores input until this point'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '}', 'message': 'invalid value'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '}', 'message': 'error recovery ignores input until this point'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '{', 'message': 'invalid value'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '}', 'message': 'error recovery ignores input until this point'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '}', 'message': 'invalid value'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '}', 'message': 'error recovery ignores input until this point'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '}', 'message': 'invalid value'}]

2021-01-20 01:21:55,148 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 10, in configuration
    task.run(task=napalm_configure, name="Loading configuration on the device", replace=False, configuration=task.host["config"])
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Loading configuration on the device (failed)


2021-01-20 01:23:29,825 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:23:32,298 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Loading configuration on the device' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/device.py", line 834, in execute
    rpc_rsp_e = self._rpc_reply(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/decorators.py", line 165, in wrapper
    raise ex
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/decorators.py", line 117, in wrapper
    rsp = function(self, *args, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/device.py", line 1440, in _rpc_reply
    return self._conn.rpc(rpc_cmd_e, filter_xml)._NCElement__doc
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/manager.py", line 226, in execute
    return cls(self._session,
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/operations/third_party/juniper/rpc.py", line 52, in request
    return self._request(rpc)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/ncclient/operations/rpc.py", line 358, in _request
    raise RPCError(to_ele(self._reply._raw), errs=errors)
ncclient.operations.rpc.RPCError: error: invalid value
warning: mgd: statement has no contents; ignored
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/utils/config.py", line 490, in try_load
    got = self.rpc.load_config(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/rpcmeta.py", line 288, in load_config
    return self._junos.execute(rpc, ignore_warning=ignore_warning)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/decorators.py", line 76, in wrapper
    return function(*args, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/decorators.py", line 31, in wrapper
    return function(*args, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/device.py", line 854, in execute
    raise EzErrors.RpcError(cmd=rpc_cmd_e, rsp=rsp, errs=ex)
jnpr.junos.exception.RpcError: RpcError(severity: error, bad_element: {, message: error: invalid value
warning: mgd: statement has no contents; ignored
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 249, in _load_candidate
    self.device.cu.load(
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/utils/config.py", line 579, in load
    return try_load(rpc_contents, rpc_xattrs, ignore_warning=ignore_warning)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jnpr/junos/utils/config.py", line 496, in try_load
    raise ConfigLoadError(cmd=err.cmd, rsp=err.rsp, errs=err.errs)
jnpr.junos.exception.ConfigLoadError: ConfigLoadError(severity: error, bad_element: {, message: error: invalid value
warning: mgd: statement has no contents; ignored
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value
error: error recovery ignores input until this point
error: invalid value)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_napalm/plugins/tasks/napalm_configure.py", line 34, in napalm_configure
    device.load_merge_candidate(filename=filename, config=configuration)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 269, in load_merge_candidate
    self._load_candidate(filename, config, False)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/napalm/junos/junos.py", line 259, in _load_candidate
    raise MergeConfigException(e.errs)
napalm.base.exceptions.MergeConfigException: [{'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '{', 'message': 'invalid value'}, {'severity': 'warning', 'source': None, 'edit_path': '[edit]', 'bad_element': 'interfaces', 'message': 'mgd: statement has no contents; ignored'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '{', 'message': 'invalid value'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '}', 'message': 'error recovery ignores input until this point'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '}', 'message': 'invalid value'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '}', 'message': 'error recovery ignores input until this point'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '{', 'message': 'invalid value'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '}', 'message': 'error recovery ignores input until this point'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '}', 'message': 'invalid value'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '}', 'message': 'error recovery ignores input until this point'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '{', 'message': 'invalid value'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '}', 'message': 'error recovery ignores input until this point'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '}', 'message': 'invalid value'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '}', 'message': 'error recovery ignores input until this point'}, {'severity': 'error', 'source': None, 'edit_path': None, 'bad_element': '}', 'message': 'invalid value'}]

2021-01-20 01:23:32,299 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 10, in configuration
    task.run(task=napalm_configure, name="Loading configuration on the device", replace=False, configuration=task.host["config"])
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Loading configuration on the device (failed)


2021-01-20 01:24:47,840 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:27:04,394 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:27:04,402 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 4, in top-level template code
    {{ iface_name }} {
jinja2.exceptions.UndefinedError: 'iface_name' is undefined

2021-01-20 01:27:04,402 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:30:05,315 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:30:05,323 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 4, in top-level template code
    {{ iface[0] }} {
jinja2.exceptions.UndefinedError: dict object has no element 0

2021-01-20 01:30:05,323 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:31:30,988 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:31:30,996 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 4, in top-level template code
    {{ iface.name }} {
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'name'

2021-01-20 01:31:30,996 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:33:57,680 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:34:49,680 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:35:07,241 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:36:15,224 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:37:11,036 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:37:11,043 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 17, in template
    {% elif iface.name  = 'lo0.0' -%}
jinja2.exceptions.TemplateSyntaxError: expected token 'end of statement block', got '='

2021-01-20 01:37:11,044 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:37:37,715 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:38:25,911 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:38:54,384 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:39:12,567 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:39:26,443 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:39:54,406 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:40:14,033 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:40:45,392 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:41:19,352 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:42:01,433 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:42:33,770 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:42:33,777 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 28, in top-level template code
    {% if level  == '1' -%}
jinja2.exceptions.UndefinedError: 'level' is undefined

2021-01-20 01:42:33,778 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:42:52,967 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:42:52,973 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 33, in template
    {% endfor %}
jinja2.exceptions.TemplateSyntaxError: Encountered unknown tag 'endfor'. You probably made a nesting mistake. Jinja is expecting this tag, but currently looking for 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.

2021-01-20 01:42:52,974 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:43:11,628 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:43:11,636 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 28, in top-level template code
    {% if level in host.isis_ifaces  == '1' -%}
jinja2.exceptions.UndefinedError: 'level' is undefined

2021-01-20 01:43:11,636 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:44:00,070 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:44:00,077 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 28, in top-level template code
    {% if level in isis_iface  == '1' -%}
jinja2.exceptions.UndefinedError: 'level' is undefined

2021-01-20 01:44:00,078 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:44:18,746 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:44:18,761 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 28, in top-level template code
    {% if level in host.isis_iface.items  == '1' -%}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'nornir.core.inventory.Host object' has no attribute 'isis_iface'

2021-01-20 01:44:18,761 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:44:30,359 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:44:30,381 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 28, in top-level template code
    {% if level in host.isis_ifaces.items  == '1' -%}
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'items'

2021-01-20 01:44:30,382 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:44:46,561 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:44:46,569 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 28, in top-level template code
    {% if level in host.isis_ifaces.level  == '1' -%}
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

2021-01-20 01:44:46,569 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:46:19,844 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:46:19,852 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 28, in top-level template code
    {% if level in host.isis_ifaces.iface  == '1' -%}
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'iface'

2021-01-20 01:46:19,853 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:47:18,343 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:47:18,350 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 28, in top-level template code
    {% if level  == '1' -%}
jinja2.exceptions.UndefinedError: 'level' is undefined

2021-01-20 01:47:18,350 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:48:07,018 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:48:07,026 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 27, in top-level template code
    interface {{ iface }} {
jinja2.exceptions.UndefinedError: 'iface' is undefined

2021-01-20 01:48:07,026 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:48:17,405 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:48:17,415 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 28, in top-level template code
    {% if level  == '1' -%}
jinja2.exceptions.UndefinedError: 'level' is undefined

2021-01-20 01:48:17,416 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:50:04,260 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:50:04,270 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 26, in top-level template code
    {% for ifaces, level in host.isis_ifaces.iteritems()  %}
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'iteritems'

2021-01-20 01:50:04,271 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:50:11,998 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:50:12,006 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 26, in top-level template code
    {% for ifaces, level in host.isis_ifaces.items()  %}
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'items'

2021-01-20 01:50:12,006 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:50:33,642 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:50:33,650 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 26, in top-level template code
    {% for level, ifaces in host.isis_ifaces.items()  %}
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'items'

2021-01-20 01:50:33,651 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 01:50:53,939 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 01:50:53,946 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 26, in top-level template code
    {% for ifaces, level in host.isis_ifaces.ifaces()  %}
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'ifaces'

2021-01-20 01:50:53,947 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 12:59:11,645 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 12:59:11,661 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.j2", line 26, in top-level template code
    {% for ifaces, level in host.isis_ifaces.ifaces()  %}
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'ifaces'

2021-01-20 12:59:11,662 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.j2", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 12:59:56,600 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 13:03:35,876 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 13:09:10,182 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 13:09:50,294 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 13:10:11,536 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 13:14:28,468 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 13:14:28,482 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in template
    set protocols isis interface {{ iface.name }} level {{ iface.level 2 disable }}
jinja2.exceptions.TemplateSyntaxError: expected token 'end of print statement', got 'integer'

2021-01-20 13:14:28,483 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 13:15:33,547 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 13:15:33,557 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% if iface.level  == '1' -%}
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'level'

2021-01-20 13:15:33,557 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 13:16:51,279 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 13:16:51,288 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    set protocols isis interface {{ iface.name }} level 2 disable
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'name'

2021-01-20 13:16:51,288 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 13:17:12,523 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 13:26:59,723 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 13:27:39,010 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 13:29:56,944 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 13:31:05,360 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 13:40:24,130 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 14:24:17,189 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 1 hosts
2021-01-20 14:26:11,721 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:26:11,769 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 7, in top-level template code
    set interfaces {{ iface.name }} unit {{ iface.unit }} family iso address {{ iface.iso_address }}
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'iso_address'

2021-01-20 14:26:11,769 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:27:13,410 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:27:13,451 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% for iface in host.isis_ifaces %}
jinja2.exceptions.UndefinedError: 'nornir.core.inventory.Host object' has no attribute 'isis_ifaces'

2021-01-20 14:27:13,451 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:27:30,449 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:27:30,491 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% for iface in host.isis_ifaces %}
TypeError: 'NoneType' object is not iterable

2021-01-20 14:27:30,492 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:31:02,062 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:31:02,107 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% if iface in host.isis_ifaces %}
TypeError: argument of type 'NoneType' is not iterable

2021-01-20 14:31:02,108 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% if iface in host.isis_ifaces %}
jinja2.exceptions.UndefinedError: 'iface' is undefined

2021-01-20 14:31:02,108 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% if iface in host.isis_ifaces %}
jinja2.exceptions.UndefinedError: 'iface' is undefined

2021-01-20 14:31:02,109 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% if iface in host.isis_ifaces %}
jinja2.exceptions.UndefinedError: 'iface' is undefined

2021-01-20 14:31:02,109 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 51, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'iface' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:31:02,110 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:31:02,110 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:31:02,110 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 51, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'iface' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:31:02,110 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:31:02,110 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:31:02,111 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:31:02,111 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:32:39,083 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:32:39,106 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in template
    {% for iface is host.isis_ifaces %}
jinja2.exceptions.TemplateSyntaxError: expected token 'in', got 'is'

2021-01-20 14:32:39,107 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 628, in compile
    source = self._parse(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 539, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 937, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 919, in subparse
    rv = self.parse_statement()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 141, in parse_statement
    return getattr(self, "parse_" + self.stream.current.value)()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 202, in parse_for
    self.stream.expect("name:in")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/lexer.py", line 411, in expect
    raise TemplateSyntaxError(
jinja2.exceptions.TemplateSyntaxError: expected token 'in', got 'is'
  File "_templates/junos/config.text", line 14

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:32:39,107 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 628, in compile
    source = self._parse(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 539, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 937, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 919, in subparse
    rv = self.parse_statement()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 141, in parse_statement
    return getattr(self, "parse_" + self.stream.current.value)()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 202, in parse_for
    self.stream.expect("name:in")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/lexer.py", line 411, in expect
    raise TemplateSyntaxError(
jinja2.exceptions.TemplateSyntaxError: expected token 'in', got 'is'
  File "_templates/junos/config.text", line 14

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:32:39,107 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 628, in compile
    source = self._parse(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 539, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 937, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 919, in subparse
    rv = self.parse_statement()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 141, in parse_statement
    return getattr(self, "parse_" + self.stream.current.value)()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 202, in parse_for
    self.stream.expect("name:in")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/lexer.py", line 411, in expect
    raise TemplateSyntaxError(
jinja2.exceptions.TemplateSyntaxError: expected token 'in', got 'is'
  File "_templates/junos/config.text", line 14

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:32:39,108 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 628, in compile
    source = self._parse(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 539, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 937, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 919, in subparse
    rv = self.parse_statement()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 141, in parse_statement
    return getattr(self, "parse_" + self.stream.current.value)()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 202, in parse_for
    self.stream.expect("name:in")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/lexer.py", line 411, in expect
    raise TemplateSyntaxError(
jinja2.exceptions.TemplateSyntaxError: expected token 'in', got 'is'
  File "_templates/junos/config.text", line 14

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:32:39,108 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 628, in compile
    source = self._parse(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 539, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 937, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 919, in subparse
    rv = self.parse_statement()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 141, in parse_statement
    return getattr(self, "parse_" + self.stream.current.value)()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 202, in parse_for
    self.stream.expect("name:in")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/lexer.py", line 411, in expect
    raise TemplateSyntaxError(
jinja2.exceptions.TemplateSyntaxError: expected token 'in', got 'is'
  File "_templates/junos/config.text", line 14

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:32:39,108 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:32:39,109 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:32:39,109 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:32:39,109 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:32:39,109 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:32:39,109 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:33:08,476 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:33:08,516 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in template
    {% if iface is host.isis_ifaces %}
jinja2.exceptions.TemplateAssertionError: no test named 'host.isis_ifaces'

2021-01-20 14:33:08,516 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in template
    {% if iface is host.isis_ifaces %}
jinja2.exceptions.TemplateAssertionError: no test named 'host.isis_ifaces'

2021-01-20 14:33:08,517 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in template
    {% if iface is host.isis_ifaces %}
jinja2.exceptions.TemplateAssertionError: no test named 'host.isis_ifaces'

2021-01-20 14:33:08,517 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in template
    {% if iface is host.isis_ifaces %}
jinja2.exceptions.TemplateAssertionError: no test named 'host.isis_ifaces'

2021-01-20 14:33:08,518 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in template
    {% if iface is host.isis_ifaces %}
jinja2.exceptions.TemplateAssertionError: no test named 'host.isis_ifaces'

2021-01-20 14:33:08,518 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in template
    {% if iface is host.isis_ifaces %}
jinja2.exceptions.TemplateAssertionError: no test named 'host.isis_ifaces'

2021-01-20 14:33:08,518 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:33:08,518 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:33:08,518 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:33:08,518 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:33:08,519 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:33:08,519 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:33:42,549 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:33:42,593 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% if iface.level  == '1' -%}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'iface' is undefined

2021-01-20 14:33:42,594 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% if iface.level  == '1' -%}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'iface' is undefined

2021-01-20 14:33:42,595 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% if iface.level  == '1' -%}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'iface' is undefined

2021-01-20 14:33:42,595 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:33:42,596 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:33:42,596 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:33:42,596 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 54, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 753, in __getattr__
    return self._fail_with_undefined_error()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'iface' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:33:42,597 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 54, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 753, in __getattr__
    return self._fail_with_undefined_error()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'iface' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:33:42,597 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 54, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 753, in __getattr__
    return self._fail_with_undefined_error()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'iface' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:33:42,597 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:33:42,598 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:33:42,598 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:34:02,780 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:34:02,823 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% if ifaces.level  == '1' -%}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

2021-01-20 14:34:02,824 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 55, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 753, in __getattr__
    return self._fail_with_undefined_error()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:34:02,825 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:34:02,825 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 55, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 753, in __getattr__
    return self._fail_with_undefined_error()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:34:02,825 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 55, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 753, in __getattr__
    return self._fail_with_undefined_error()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:34:02,826 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 55, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 753, in __getattr__
    return self._fail_with_undefined_error()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:34:02,826 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 55, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 753, in __getattr__
    return self._fail_with_undefined_error()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:34:02,826 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:34:02,826 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:34:02,827 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:34:02,827 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:34:02,827 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:34:26,667 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:34:26,715 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% if ifaces.level  == '1' -%}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

2021-01-20 14:34:26,715 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% if ifaces.level  == '1' -%}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

2021-01-20 14:34:26,715 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% if ifaces.level  == '1' -%}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

2021-01-20 14:34:26,715 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% if ifaces.level  == '1' -%}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

2021-01-20 14:34:26,716 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:34:26,716 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:34:26,716 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:34:26,717 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:34:26,717 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 54, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 753, in __getattr__
    return self._fail_with_undefined_error()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:34:26,717 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 54, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 753, in __getattr__
    return self._fail_with_undefined_error()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:34:26,717 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:34:26,717 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:35:00,184 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:35:00,232 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% if ifaces.level  == '1' -%}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

2021-01-20 14:35:00,232 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% if ifaces.level  == '1' -%}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

2021-01-20 14:35:00,232 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% if ifaces.level  == '1' -%}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

2021-01-20 14:35:00,233 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 55, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 753, in __getattr__
    return self._fail_with_undefined_error()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:35:00,233 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 55, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 753, in __getattr__
    return self._fail_with_undefined_error()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:35:00,233 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:35:00,234 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 55, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 753, in __getattr__
    return self._fail_with_undefined_error()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:35:00,234 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:35:00,234 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:35:00,234 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:35:00,234 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:35:00,235 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:35:17,384 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:35:17,429 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% if level  == '1' -%}
jinja2.exceptions.UndefinedError: 'level' is undefined

2021-01-20 14:35:17,429 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 56, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'level' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:35:17,429 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 56, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'level' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:35:17,430 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 56, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'level' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:35:17,430 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 56, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'level' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:35:17,430 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 56, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'level' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:35:17,430 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:35:17,431 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:35:17,431 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:35:17,431 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:35:17,431 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:35:17,431 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:35:40,418 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:35:40,464 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 56, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:35:40,464 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 56, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'None' has no attribute 'level'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:35:40,465 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 56, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:35:40,465 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 56, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:35:40,465 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% if host.isis_ifaces.level  == '1' -%}
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

2021-01-20 14:35:40,466 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 56, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:35:40,466 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:35:40,466 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:35:40,466 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:35:40,466 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:35:40,466 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:35:40,466 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:36:05,724 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:36:05,750 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 628, in compile
    source = self._parse(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 539, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 937, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 919, in subparse
    rv = self.parse_statement()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 141, in parse_statement
    return getattr(self, "parse_" + self.stream.current.value)()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 222, in parse_if
    node.body = self.parse_statements(("name:elif", "name:else", "name:endif"))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 181, in parse_statements
    self.fail_eof(end_tokens)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 115, in fail_eof
    return self._fail_ut_eof(None, stack, lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 101, in _fail_ut_eof
    self.fail(" ".join(message), lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 64, in fail
    raise exc(msg, lineno, self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.
  File "_templates/junos/config.text", line 26

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:36:05,750 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 628, in compile
    source = self._parse(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 539, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 937, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 919, in subparse
    rv = self.parse_statement()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 141, in parse_statement
    return getattr(self, "parse_" + self.stream.current.value)()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 222, in parse_if
    node.body = self.parse_statements(("name:elif", "name:else", "name:endif"))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 181, in parse_statements
    self.fail_eof(end_tokens)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 115, in fail_eof
    return self._fail_ut_eof(None, stack, lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 101, in _fail_ut_eof
    self.fail(" ".join(message), lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 64, in fail
    raise exc(msg, lineno, self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.
  File "_templates/junos/config.text", line 26

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:36:05,750 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 628, in compile
    source = self._parse(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 539, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 937, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 919, in subparse
    rv = self.parse_statement()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 141, in parse_statement
    return getattr(self, "parse_" + self.stream.current.value)()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 222, in parse_if
    node.body = self.parse_statements(("name:elif", "name:else", "name:endif"))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 181, in parse_statements
    self.fail_eof(end_tokens)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 115, in fail_eof
    return self._fail_ut_eof(None, stack, lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 101, in _fail_ut_eof
    self.fail(" ".join(message), lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 64, in fail
    raise exc(msg, lineno, self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.
  File "_templates/junos/config.text", line 26

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:36:05,750 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 628, in compile
    source = self._parse(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 539, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 937, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 919, in subparse
    rv = self.parse_statement()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 141, in parse_statement
    return getattr(self, "parse_" + self.stream.current.value)()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 222, in parse_if
    node.body = self.parse_statements(("name:elif", "name:else", "name:endif"))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 181, in parse_statements
    self.fail_eof(end_tokens)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 115, in fail_eof
    return self._fail_ut_eof(None, stack, lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 101, in _fail_ut_eof
    self.fail(" ".join(message), lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 64, in fail
    raise exc(msg, lineno, self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.
  File "_templates/junos/config.text", line 26

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:36:05,750 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 26, in template
    set protocols mpls interface lo0.0
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.

2021-01-20 14:36:05,751 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 26, in template
    set protocols mpls interface lo0.0
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.

2021-01-20 14:36:05,751 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:36:05,751 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:36:05,751 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:36:05,751 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:36:05,752 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:36:05,752 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:36:25,520 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:36:25,545 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 628, in compile
    source = self._parse(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 539, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 937, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 919, in subparse
    rv = self.parse_statement()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 141, in parse_statement
    return getattr(self, "parse_" + self.stream.current.value)()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 222, in parse_if
    node.body = self.parse_statements(("name:elif", "name:else", "name:endif"))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 181, in parse_statements
    self.fail_eof(end_tokens)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 115, in fail_eof
    return self._fail_ut_eof(None, stack, lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 101, in _fail_ut_eof
    self.fail(" ".join(message), lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 64, in fail
    raise exc(msg, lineno, self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.
  File "_templates/junos/config.text", line 26

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:36:25,545 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 26, in template
    set protocols mpls interface lo0.0
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.

2021-01-20 14:36:25,546 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 26, in template
    set protocols mpls interface lo0.0
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.

2021-01-20 14:36:25,546 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 26, in template
    set protocols mpls interface lo0.0
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.

2021-01-20 14:36:25,546 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:36:25,546 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 628, in compile
    source = self._parse(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 539, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 937, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 919, in subparse
    rv = self.parse_statement()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 141, in parse_statement
    return getattr(self, "parse_" + self.stream.current.value)()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 222, in parse_if
    node.body = self.parse_statements(("name:elif", "name:else", "name:endif"))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 181, in parse_statements
    self.fail_eof(end_tokens)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 115, in fail_eof
    return self._fail_ut_eof(None, stack, lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 101, in _fail_ut_eof
    self.fail(" ".join(message), lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 64, in fail
    raise exc(msg, lineno, self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.
  File "_templates/junos/config.text", line 26

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:36:25,547 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:36:25,547 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 628, in compile
    source = self._parse(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 539, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 937, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 919, in subparse
    rv = self.parse_statement()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 141, in parse_statement
    return getattr(self, "parse_" + self.stream.current.value)()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 222, in parse_if
    node.body = self.parse_statements(("name:elif", "name:else", "name:endif"))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 181, in parse_statements
    self.fail_eof(end_tokens)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 115, in fail_eof
    return self._fail_ut_eof(None, stack, lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 101, in _fail_ut_eof
    self.fail(" ".join(message), lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 64, in fail
    raise exc(msg, lineno, self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.
  File "_templates/junos/config.text", line 26

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:36:25,547 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:36:25,547 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:36:25,547 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:36:25,547 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:36:59,189 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:36:59,237 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 21, in top-level template code
    {% for iface in host.isis_ifaces %}
TypeError: 'NoneType' object is not iterable

2021-01-20 14:36:59,237 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:37:13,285 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:37:13,326 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 21, in top-level template code
    {% for iface in host.isis_ifaces %}
TypeError: 'NoneType' object is not iterable

2021-01-20 14:37:13,326 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:37:38,538 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:37:38,581 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 22, in top-level template code
    {% for iface in host.isis_ifaces %}
TypeError: 'NoneType' object is not iterable

2021-01-20 14:37:38,582 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:41:10,989 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:41:11,051 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% if host.isis_ifaces is defined and variable|length %}
jinja2.exceptions.UndefinedError: 'variable' is undefined

2021-01-20 14:41:11,051 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% if host.isis_ifaces is defined and variable|length %}
jinja2.exceptions.UndefinedError: 'variable' is undefined

2021-01-20 14:41:11,052 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% if host.isis_ifaces is defined and variable|length %}
jinja2.exceptions.UndefinedError: 'variable' is undefined

2021-01-20 14:41:11,052 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% if host.isis_ifaces is defined and variable|length %}
jinja2.exceptions.UndefinedError: 'variable' is undefined

2021-01-20 14:41:11,053 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:41:11,053 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:41:11,053 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 54, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'variable' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:41:11,054 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 54, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'variable' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:41:11,054 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:41:11,054 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:41:11,054 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:41:11,054 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:41:44,411 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:41:44,460 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 21, in top-level template code
    {% for iface in host.isis_ifaces %}
TypeError: 'NoneType' object is not iterable

2021-01-20 14:41:44,461 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:42:57,741 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:42:57,793 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% for iface in host.isis_ifaces %}
TypeError: 'NoneType' object is not iterable

2021-01-20 14:42:57,793 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:47:22,870 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:47:22,918 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 52, in root
TypeError: argument of type 'NoneType' is not iterable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:47:22,918 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% if iface in host.isis_ifaces %}
jinja2.exceptions.UndefinedError: 'iface' is undefined

2021-01-20 14:47:22,919 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:47:22,920 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 52, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'iface' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:47:22,920 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 52, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'iface' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:47:22,920 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:47:22,921 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:47:22,921 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 52, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'iface' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:47:22,921 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 52, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'iface' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:47:22,921 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:47:22,922 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:47:22,922 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:47:32,353 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:47:32,398 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% if ifaces in host.isis_ifaces %}
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

2021-01-20 14:47:32,399 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% if ifaces in host.isis_ifaces %}
TypeError: argument of type 'NoneType' is not iterable

2021-01-20 14:47:32,399 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% if ifaces in host.isis_ifaces %}
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

2021-01-20 14:47:32,399 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% if ifaces in host.isis_ifaces %}
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

2021-01-20 14:47:32,399 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% if ifaces in host.isis_ifaces %}
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

2021-01-20 14:47:32,399 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% if ifaces in host.isis_ifaces %}
jinja2.exceptions.UndefinedError: 'ifaces' is undefined

2021-01-20 14:47:32,400 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:47:32,400 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:47:32,400 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:47:32,400 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:47:32,401 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:47:32,401 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:47:44,177 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:47:44,222 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 53, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:47:44,222 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 51, in root
TypeError: argument of type 'NoneType' is not iterable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:47:44,222 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% elif host.isis_ifaces.level  == '1' -%}
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

2021-01-20 14:47:44,223 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 53, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:47:44,223 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% elif host.isis_ifaces.level  == '1' -%}
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

2021-01-20 14:47:44,223 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 53, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:47:44,223 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:47:44,224 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:47:44,224 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:47:44,224 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:47:44,224 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:47:44,225 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:48:08,104 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:48:08,149 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% elif level  == '1' -%}
jinja2.exceptions.UndefinedError: 'level' is undefined

2021-01-20 14:48:08,150 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 52, in root
TypeError: argument of type 'NoneType' is not iterable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:48:08,150 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% elif level  == '1' -%}
jinja2.exceptions.UndefinedError: 'level' is undefined

2021-01-20 14:48:08,150 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 54, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'level' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:48:08,151 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 54, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'level' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:48:08,151 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 54, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'level' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:48:08,151 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:48:08,151 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:48:08,152 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:48:08,152 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:48:08,152 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:48:08,152 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:48:44,318 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:48:44,359 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 52, in root
TypeError: argument of type 'NoneType' is not iterable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:48:44,360 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% elif isis_ifaces.level  == '1' -%}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'isis_ifaces' is undefined

2021-01-20 14:48:44,361 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% elif isis_ifaces.level  == '1' -%}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'isis_ifaces' is undefined

2021-01-20 14:48:44,361 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 54, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 753, in __getattr__
    return self._fail_with_undefined_error()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'isis_ifaces' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:48:44,361 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:48:44,361 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 54, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 753, in __getattr__
    return self._fail_with_undefined_error()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'isis_ifaces' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:48:44,361 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:48:44,361 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:48:44,362 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 54, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 753, in __getattr__
    return self._fail_with_undefined_error()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'isis_ifaces' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:48:44,362 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:48:44,362 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:48:44,362 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:49:30,246 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:49:30,294 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 54, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:49:30,294 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 54, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:49:30,294 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% elif host.isis_ifaces.level  == '1' -%}
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

2021-01-20 14:49:30,295 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 54, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:49:30,295 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 54, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'None' has no attribute 'level'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:49:30,295 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 54, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:49:30,295 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:49:30,296 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:49:30,296 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:49:30,296 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:49:30,296 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:49:30,296 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:49:49,264 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:49:49,305 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% elif level  == '1' -%}
jinja2.exceptions.UndefinedError: 'level' is undefined

2021-01-20 14:49:49,305 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% elif level  == '1' -%}
jinja2.exceptions.UndefinedError: 'level' is undefined

2021-01-20 14:49:49,305 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% elif level  == '1' -%}
jinja2.exceptions.UndefinedError: 'level' is undefined

2021-01-20 14:49:49,305 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% elif level  == '1' -%}
jinja2.exceptions.UndefinedError: 'level' is undefined

2021-01-20 14:49:49,306 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% elif level  == '1' -%}
jinja2.exceptions.UndefinedError: 'level' is undefined

2021-01-20 14:49:49,306 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% elif level  == '1' -%}
jinja2.exceptions.UndefinedError: 'level' is undefined

2021-01-20 14:49:49,306 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:49:49,306 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:49:49,306 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:49:49,306 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:49:49,307 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:49:49,307 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:50:01,209 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:50:01,253 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% elif level  == '1' -%}
jinja2.exceptions.UndefinedError: 'level' is undefined

2021-01-20 14:50:01,253 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% elif level  == '1' -%}
jinja2.exceptions.UndefinedError: 'level' is undefined

2021-01-20 14:50:01,254 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 55, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'level' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:50:01,255 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 55, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'level' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:50:01,255 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:50:01,255 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:50:01,256 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:50:01,256 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 55, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'level' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:50:01,256 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:50:01,257 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 55, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'level' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:50:01,257 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:50:01,257 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:50:13,562 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:50:13,602 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 21, in top-level template code
    {% for iface in host.isis_ifaces %}
TypeError: 'NoneType' object is not iterable

2021-01-20 14:50:13,602 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:50:46,328 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:50:46,365 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 22, in top-level template code
    {% for iface in host.isis_ifaces %}
TypeError: 'NoneType' object is not iterable

2021-01-20 14:50:46,366 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:51:13,952 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:51:13,995 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 23, in top-level template code
    set protocols ldp interface {{ iface.name }}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'iface' is undefined

2021-01-20 14:51:13,996 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 23, in top-level template code
    set protocols ldp interface {{ iface.name }}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'iface' is undefined

2021-01-20 14:51:13,996 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 69, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 753, in __getattr__
    return self._fail_with_undefined_error()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'iface' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:51:13,996 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 23, in top-level template code
    set protocols ldp interface {{ iface.name }}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'iface' is undefined

2021-01-20 14:51:13,997 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 69, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 753, in __getattr__
    return self._fail_with_undefined_error()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'iface' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:51:13,997 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:51:13,997 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:51:13,997 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 69, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 753, in __getattr__
    return self._fail_with_undefined_error()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'iface' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:51:13,998 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:51:13,998 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:51:13,998 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:51:13,998 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:51:32,722 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:51:32,763 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 23, in top-level template code
    set protocols ldp interface {{ name }}
jinja2.exceptions.UndefinedError: 'name' is undefined

2021-01-20 14:51:32,764 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 23, in top-level template code
    set protocols ldp interface {{ name }}
jinja2.exceptions.UndefinedError: 'name' is undefined

2021-01-20 14:51:32,764 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 68, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'name' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:51:32,764 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 68, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'name' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:51:32,765 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 68, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'name' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:51:32,765 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:51:32,765 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 23, in top-level template code
    set protocols ldp interface {{ name }}
jinja2.exceptions.UndefinedError: 'name' is undefined

2021-01-20 14:51:32,765 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:51:32,765 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:51:32,766 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:51:32,766 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:51:32,766 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:52:25,993 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:52:26,062 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 23, in top-level template code
    set protocols ldp interface {{ isis_ifaces.name }}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'isis_ifaces' is undefined

2021-01-20 14:52:26,063 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 23, in top-level template code
    set protocols ldp interface {{ isis_ifaces.name }}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'isis_ifaces' is undefined

2021-01-20 14:52:26,063 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 23, in top-level template code
    set protocols ldp interface {{ isis_ifaces.name }}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'isis_ifaces' is undefined

2021-01-20 14:52:26,063 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 23, in top-level template code
    set protocols ldp interface {{ isis_ifaces.name }}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'isis_ifaces' is undefined

2021-01-20 14:52:26,064 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 69, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 753, in __getattr__
    return self._fail_with_undefined_error()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'isis_ifaces' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:52:26,064 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:52:26,065 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:52:26,065 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:52:26,065 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:52:26,066 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:52:26,066 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 69, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 753, in __getattr__
    return self._fail_with_undefined_error()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'isis_ifaces' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:52:26,066 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:52:42,176 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:52:42,217 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 23, in top-level template code
    set protocols ldp interface {{ name }}
jinja2.exceptions.UndefinedError: 'name' is undefined

2021-01-20 14:52:42,217 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 23, in top-level template code
    set protocols ldp interface {{ name }}
jinja2.exceptions.UndefinedError: 'name' is undefined

2021-01-20 14:52:42,217 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 23, in top-level template code
    set protocols ldp interface {{ name }}
jinja2.exceptions.UndefinedError: 'name' is undefined

2021-01-20 14:52:42,217 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 23, in top-level template code
    set protocols ldp interface {{ name }}
jinja2.exceptions.UndefinedError: 'name' is undefined

2021-01-20 14:52:42,217 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 23, in top-level template code
    set protocols ldp interface {{ name }}
jinja2.exceptions.UndefinedError: 'name' is undefined

2021-01-20 14:52:42,217 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 23, in top-level template code
    set protocols ldp interface {{ name }}
jinja2.exceptions.UndefinedError: 'name' is undefined

2021-01-20 14:52:42,218 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:52:42,218 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:52:42,218 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:52:42,218 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:52:42,218 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:52:42,218 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:53:24,773 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:54:23,546 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:54:23,587 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    set protocols ldp interface {{ name }}
jinja2.exceptions.UndefinedError: 'name' is undefined

2021-01-20 14:54:23,588 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 55, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'name' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:54:23,588 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 55, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'name' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:54:23,588 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 55, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'name' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:54:23,589 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 55, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'name' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:54:23,589 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    set protocols ldp interface {{ name }}
jinja2.exceptions.UndefinedError: 'name' is undefined

2021-01-20 14:54:23,589 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:54:23,589 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:54:23,589 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:54:23,589 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:54:23,590 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:54:23,590 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:57:52,694 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 14:57:52,733 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    set protocols ldp interface {{ name }}
jinja2.exceptions.UndefinedError: 'name' is undefined

2021-01-20 14:57:52,733 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    set protocols ldp interface {{ name }}
jinja2.exceptions.UndefinedError: 'name' is undefined

2021-01-20 14:57:52,733 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 55, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'name' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:57:52,734 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 55, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'name' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:57:52,734 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:57:52,734 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 55, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'name' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:57:52,734 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:57:52,735 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 55, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'name' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 14:57:52,735 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:57:52,735 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:57:52,735 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 14:57:52,735 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:00:50,259 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 15:01:05,230 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 15:02:01,308 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 15:02:01,346 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    set protocols isis interface {{ name }} level 2 disable
jinja2.exceptions.UndefinedError: 'name' is undefined

2021-01-20 15:02:01,346 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    set protocols isis interface {{ name }} level 2 disable
jinja2.exceptions.UndefinedError: 'name' is undefined

2021-01-20 15:02:01,347 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 56, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'name' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 15:02:01,347 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    set protocols isis interface {{ name }} level 2 disable
jinja2.exceptions.UndefinedError: 'name' is undefined

2021-01-20 15:02:01,347 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    set protocols isis interface {{ name }} level 2 disable
jinja2.exceptions.UndefinedError: 'name' is undefined

2021-01-20 15:02:01,348 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    set protocols isis interface {{ name }} level 2 disable
jinja2.exceptions.UndefinedError: 'name' is undefined

2021-01-20 15:02:01,348 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:02:01,348 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:02:01,348 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:02:01,348 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:02:01,348 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:02:01,349 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:02:24,376 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 15:02:49,764 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 15:03:26,962 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 15:03:36,470 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 15:03:51,168 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 15:04:03,090 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 15:04:03,129 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% elif isis_ifaces.level  == '1' -%}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'isis_ifaces' is undefined

2021-01-20 15:04:03,129 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% elif isis_ifaces.level  == '1' -%}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'isis_ifaces' is undefined

2021-01-20 15:04:03,129 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% elif isis_ifaces.level  == '1' -%}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'isis_ifaces' is undefined

2021-01-20 15:04:03,129 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% elif isis_ifaces.level  == '1' -%}
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'isis_ifaces' is undefined

2021-01-20 15:04:03,130 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 54, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 753, in __getattr__
    return self._fail_with_undefined_error()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'isis_ifaces' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 15:04:03,130 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 54, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 471, in getattr
    return getattr(obj, attribute)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 753, in __getattr__
    return self._fail_with_undefined_error()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'isis_ifaces' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 15:04:03,130 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:04:03,130 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:04:03,131 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:04:03,131 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:04:03,131 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:04:03,131 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:14:19,259 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 15:14:19,301 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 22, in top-level template code
    {% for iface in host.isis_ifaces %}
TypeError: 'NoneType' object is not iterable

2021-01-20 15:14:19,302 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:14:31,973 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 15:14:32,017 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% elif level  == '1' -%}
jinja2.exceptions.UndefinedError: 'level' is undefined

2021-01-20 15:14:32,018 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:21:15,541 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 15:21:15,562 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in template
    {% if host.isis_ifaces is defined and level  == '1' -%%}
jinja2.exceptions.TemplateSyntaxError: unexpected '%'

2021-01-20 15:21:15,562 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 628, in compile
    source = self._parse(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 539, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 937, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 919, in subparse
    rv = self.parse_statement()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 141, in parse_statement
    return getattr(self, "parse_" + self.stream.current.value)()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 221, in parse_if
    node.test = self.parse_tuple(with_condexpr=False)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 644, in parse_tuple
    args.append(parse())
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 635, in parse
    return self.parse_expression(with_condexpr=False)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 449, in parse_expression
    return self.parse_or()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 466, in parse_or
    left = self.parse_and()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 477, in parse_and
    right = self.parse_not()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 486, in parse_not
    return self.parse_compare()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 496, in parse_compare
    ops.append(nodes.Operand(token_type, self.parse_math1()))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 517, in parse_math1
    right = self.parse_concat()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 524, in parse_concat
    args = [self.parse_math2()]
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 534, in parse_math2
    left = self.parse_pow()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 545, in parse_pow
    left = self.parse_unary()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 563, in parse_unary
    node = self.parse_primary()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 599, in parse_primary
    self.fail("unexpected '%s'" % describe_token(token), token.lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 64, in fail
    raise exc(msg, lineno, self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: unexpected '%'
  File "_templates/junos/config.text", line 14

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 15:21:15,562 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 628, in compile
    source = self._parse(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 539, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 937, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 919, in subparse
    rv = self.parse_statement()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 141, in parse_statement
    return getattr(self, "parse_" + self.stream.current.value)()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 221, in parse_if
    node.test = self.parse_tuple(with_condexpr=False)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 644, in parse_tuple
    args.append(parse())
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 635, in parse
    return self.parse_expression(with_condexpr=False)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 449, in parse_expression
    return self.parse_or()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 466, in parse_or
    left = self.parse_and()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 477, in parse_and
    right = self.parse_not()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 486, in parse_not
    return self.parse_compare()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 496, in parse_compare
    ops.append(nodes.Operand(token_type, self.parse_math1()))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 517, in parse_math1
    right = self.parse_concat()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 524, in parse_concat
    args = [self.parse_math2()]
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 534, in parse_math2
    left = self.parse_pow()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 545, in parse_pow
    left = self.parse_unary()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 563, in parse_unary
    node = self.parse_primary()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 599, in parse_primary
    self.fail("unexpected '%s'" % describe_token(token), token.lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 64, in fail
    raise exc(msg, lineno, self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: unexpected '%'
  File "_templates/junos/config.text", line 14

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 15:21:15,562 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 628, in compile
    source = self._parse(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 539, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 937, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 919, in subparse
    rv = self.parse_statement()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 141, in parse_statement
    return getattr(self, "parse_" + self.stream.current.value)()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 221, in parse_if
    node.test = self.parse_tuple(with_condexpr=False)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 644, in parse_tuple
    args.append(parse())
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 635, in parse
    return self.parse_expression(with_condexpr=False)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 449, in parse_expression
    return self.parse_or()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 466, in parse_or
    left = self.parse_and()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 477, in parse_and
    right = self.parse_not()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 486, in parse_not
    return self.parse_compare()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 496, in parse_compare
    ops.append(nodes.Operand(token_type, self.parse_math1()))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 517, in parse_math1
    right = self.parse_concat()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 524, in parse_concat
    args = [self.parse_math2()]
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 534, in parse_math2
    left = self.parse_pow()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 545, in parse_pow
    left = self.parse_unary()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 563, in parse_unary
    node = self.parse_primary()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 599, in parse_primary
    self.fail("unexpected '%s'" % describe_token(token), token.lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 64, in fail
    raise exc(msg, lineno, self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: unexpected '%'
  File "_templates/junos/config.text", line 14

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 15:21:15,563 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 628, in compile
    source = self._parse(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 539, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 937, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 919, in subparse
    rv = self.parse_statement()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 141, in parse_statement
    return getattr(self, "parse_" + self.stream.current.value)()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 221, in parse_if
    node.test = self.parse_tuple(with_condexpr=False)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 644, in parse_tuple
    args.append(parse())
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 635, in parse
    return self.parse_expression(with_condexpr=False)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 449, in parse_expression
    return self.parse_or()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 466, in parse_or
    left = self.parse_and()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 477, in parse_and
    right = self.parse_not()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 486, in parse_not
    return self.parse_compare()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 496, in parse_compare
    ops.append(nodes.Operand(token_type, self.parse_math1()))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 517, in parse_math1
    right = self.parse_concat()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 524, in parse_concat
    args = [self.parse_math2()]
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 534, in parse_math2
    left = self.parse_pow()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 545, in parse_pow
    left = self.parse_unary()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 563, in parse_unary
    node = self.parse_primary()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 599, in parse_primary
    self.fail("unexpected '%s'" % describe_token(token), token.lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 64, in fail
    raise exc(msg, lineno, self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: unexpected '%'
  File "_templates/junos/config.text", line 14

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 15:21:15,563 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 628, in compile
    source = self._parse(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 539, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 937, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 919, in subparse
    rv = self.parse_statement()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 141, in parse_statement
    return getattr(self, "parse_" + self.stream.current.value)()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 221, in parse_if
    node.test = self.parse_tuple(with_condexpr=False)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 644, in parse_tuple
    args.append(parse())
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 635, in parse
    return self.parse_expression(with_condexpr=False)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 449, in parse_expression
    return self.parse_or()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 466, in parse_or
    left = self.parse_and()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 477, in parse_and
    right = self.parse_not()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 486, in parse_not
    return self.parse_compare()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 496, in parse_compare
    ops.append(nodes.Operand(token_type, self.parse_math1()))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 517, in parse_math1
    right = self.parse_concat()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 524, in parse_concat
    args = [self.parse_math2()]
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 534, in parse_math2
    left = self.parse_pow()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 545, in parse_pow
    left = self.parse_unary()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 563, in parse_unary
    node = self.parse_primary()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 599, in parse_primary
    self.fail("unexpected '%s'" % describe_token(token), token.lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 64, in fail
    raise exc(msg, lineno, self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: unexpected '%'
  File "_templates/junos/config.text", line 14

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 15:21:15,563 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:21:15,563 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:21:15,564 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:21:15,564 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:21:15,564 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:21:15,564 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:21:29,714 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 15:21:29,757 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% if host.isis_ifaces is defined and level  == '1' -%}
jinja2.exceptions.UndefinedError: 'level' is undefined

2021-01-20 15:21:29,757 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% if host.isis_ifaces is defined and level  == '1' -%}
jinja2.exceptions.UndefinedError: 'level' is undefined

2021-01-20 15:21:29,758 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:21:29,758 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:21:29,759 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 63, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'nornir.core.inventory.Host object' has no attribute 'isis_ifaces'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 15:21:29,759 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 53, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'level' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 15:21:29,759 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 53, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'level' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 15:21:29,759 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 53, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'level' is undefined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 15:21:29,760 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:21:29,760 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:21:29,760 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:21:29,760 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:21:48,099 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 15:21:48,144 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 53, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 15:21:48,145 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 53, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 15:21:48,145 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 63, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'nornir.core.inventory.Host object' has no attribute 'isis_ifaces'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 15:21:48,145 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% if host.isis_ifaces is defined and host.isis_ifaces.level  == '1' -%}
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

2021-01-20 15:21:48,145 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% if host.isis_ifaces is defined and host.isis_ifaces.level  == '1' -%}
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

2021-01-20 15:21:48,146 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 53, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 15:21:48,146 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:21:48,146 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:21:48,146 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:21:48,146 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:21:48,146 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:21:48,147 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:22:08,333 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 15:22:08,382 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% if host.isis_ifaces is defined and host.isis_ifaces.level  == '1' -%}
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

2021-01-20 15:22:08,383 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% if host.isis_ifaces is defined and host.isis_ifaces.level  == '1' -%}
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

2021-01-20 15:22:08,383 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% if host.isis_ifaces is defined and host.isis_ifaces.level  == '1' -%}
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

2021-01-20 15:22:08,383 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in top-level template code
    {% if host.isis_ifaces is defined and host.isis_ifaces.level  == '1' -%}
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

2021-01-20 15:22:08,383 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 21, in top-level template code
    {% for iface in host.isis_ifaces %}
jinja2.exceptions.UndefinedError: 'nornir.core.inventory.Host object' has no attribute 'isis_ifaces'

2021-01-20 15:22:08,383 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:22:08,384 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:22:08,384 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1088, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "_templates/junos/config.text", line 52, in root
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/runtime.py", line 747, in _fail_with_undefined_error
    raise self._undefined_exception(self._undefined_message)
jinja2.exceptions.UndefinedError: 'list object' has no attribute 'level'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 15:22:08,384 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:22:08,384 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:22:08,384 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:22:08,385 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:22:26,511 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 15:22:26,531 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 628, in compile
    source = self._parse(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 539, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 937, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 919, in subparse
    rv = self.parse_statement()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 141, in parse_statement
    return getattr(self, "parse_" + self.stream.current.value)()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 221, in parse_if
    node.test = self.parse_tuple(with_condexpr=False)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 644, in parse_tuple
    args.append(parse())
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 635, in parse
    return self.parse_expression(with_condexpr=False)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 449, in parse_expression
    return self.parse_or()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 466, in parse_or
    left = self.parse_and()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 477, in parse_and
    right = self.parse_not()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 486, in parse_not
    return self.parse_compare()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 496, in parse_compare
    ops.append(nodes.Operand(token_type, self.parse_math1()))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 517, in parse_math1
    right = self.parse_concat()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 524, in parse_concat
    args = [self.parse_math2()]
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 534, in parse_math2
    left = self.parse_pow()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 545, in parse_pow
    left = self.parse_unary()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 563, in parse_unary
    node = self.parse_primary()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 599, in parse_primary
    self.fail("unexpected '%s'" % describe_token(token), token.lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 64, in fail
    raise exc(msg, lineno, self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: unexpected '%'
  File "_templates/junos/config.text", line 14

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 15:22:26,532 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 628, in compile
    source = self._parse(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 539, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 937, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 919, in subparse
    rv = self.parse_statement()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 141, in parse_statement
    return getattr(self, "parse_" + self.stream.current.value)()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 221, in parse_if
    node.test = self.parse_tuple(with_condexpr=False)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 644, in parse_tuple
    args.append(parse())
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 635, in parse
    return self.parse_expression(with_condexpr=False)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 449, in parse_expression
    return self.parse_or()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 466, in parse_or
    left = self.parse_and()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 477, in parse_and
    right = self.parse_not()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 486, in parse_not
    return self.parse_compare()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 496, in parse_compare
    ops.append(nodes.Operand(token_type, self.parse_math1()))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 517, in parse_math1
    right = self.parse_concat()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 524, in parse_concat
    args = [self.parse_math2()]
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 534, in parse_math2
    left = self.parse_pow()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 545, in parse_pow
    left = self.parse_unary()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 563, in parse_unary
    node = self.parse_primary()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 599, in parse_primary
    self.fail("unexpected '%s'" % describe_token(token), token.lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 64, in fail
    raise exc(msg, lineno, self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: unexpected '%'
  File "_templates/junos/config.text", line 14

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 15:22:26,532 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 628, in compile
    source = self._parse(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 539, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 937, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 919, in subparse
    rv = self.parse_statement()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 141, in parse_statement
    return getattr(self, "parse_" + self.stream.current.value)()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 221, in parse_if
    node.test = self.parse_tuple(with_condexpr=False)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 644, in parse_tuple
    args.append(parse())
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 635, in parse
    return self.parse_expression(with_condexpr=False)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 449, in parse_expression
    return self.parse_or()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 466, in parse_or
    left = self.parse_and()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 477, in parse_and
    right = self.parse_not()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 486, in parse_not
    return self.parse_compare()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 496, in parse_compare
    ops.append(nodes.Operand(token_type, self.parse_math1()))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 517, in parse_math1
    right = self.parse_concat()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 524, in parse_concat
    args = [self.parse_math2()]
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 534, in parse_math2
    left = self.parse_pow()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 545, in parse_pow
    left = self.parse_unary()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 563, in parse_unary
    node = self.parse_primary()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 599, in parse_primary
    self.fail("unexpected '%s'" % describe_token(token), token.lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 64, in fail
    raise exc(msg, lineno, self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: unexpected '%'
  File "_templates/junos/config.text", line 14

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 15:22:26,533 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 14, in template
    {% if host.isis_ifaces is defined and level  == '1' -%%}
jinja2.exceptions.TemplateSyntaxError: unexpected '%'

2021-01-20 15:22:26,533 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 628, in compile
    source = self._parse(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 539, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 937, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 919, in subparse
    rv = self.parse_statement()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 141, in parse_statement
    return getattr(self, "parse_" + self.stream.current.value)()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 221, in parse_if
    node.test = self.parse_tuple(with_condexpr=False)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 644, in parse_tuple
    args.append(parse())
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 635, in parse
    return self.parse_expression(with_condexpr=False)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 449, in parse_expression
    return self.parse_or()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 466, in parse_or
    left = self.parse_and()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 477, in parse_and
    right = self.parse_not()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 486, in parse_not
    return self.parse_compare()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 496, in parse_compare
    ops.append(nodes.Operand(token_type, self.parse_math1()))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 517, in parse_math1
    right = self.parse_concat()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 524, in parse_concat
    args = [self.parse_math2()]
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 534, in parse_math2
    left = self.parse_pow()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 545, in parse_pow
    left = self.parse_unary()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 563, in parse_unary
    node = self.parse_primary()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 599, in parse_primary
    self.fail("unexpected '%s'" % describe_token(token), token.lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 64, in fail
    raise exc(msg, lineno, self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: unexpected '%'
  File "_templates/junos/config.text", line 14

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 15:22:26,533 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:22:26,533 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:22:26,533 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:22:26,533 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 628, in compile
    source = self._parse(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 539, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 937, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 919, in subparse
    rv = self.parse_statement()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 141, in parse_statement
    return getattr(self, "parse_" + self.stream.current.value)()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 221, in parse_if
    node.test = self.parse_tuple(with_condexpr=False)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 644, in parse_tuple
    args.append(parse())
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 635, in parse
    return self.parse_expression(with_condexpr=False)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 449, in parse_expression
    return self.parse_or()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 466, in parse_or
    left = self.parse_and()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 477, in parse_and
    right = self.parse_not()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 486, in parse_not
    return self.parse_compare()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 496, in parse_compare
    ops.append(nodes.Operand(token_type, self.parse_math1()))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 517, in parse_math1
    right = self.parse_concat()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 524, in parse_concat
    args = [self.parse_math2()]
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 534, in parse_math2
    left = self.parse_pow()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 545, in parse_pow
    left = self.parse_unary()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 563, in parse_unary
    node = self.parse_primary()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 599, in parse_primary
    self.fail("unexpected '%s'" % describe_token(token), token.lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 64, in fail
    raise exc(msg, lineno, self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: unexpected '%'
  File "_templates/junos/config.text", line 14

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 15:22:26,533 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:22:26,534 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:22:26,534 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:22:45,600 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 15:22:45,638 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 43, in template_file
    text = t.render(host=task.host, **kwargs)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in top-level template code
    {% elif level  == '1' -%}
jinja2.exceptions.UndefinedError: 'level' is undefined

2021-01-20 15:22:45,638 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:23:16,158 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 15:23:16,178 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in template
    {% and level  == '1' -%}
jinja2.exceptions.TemplateSyntaxError: Encountered unknown tag 'and'. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.

2021-01-20 15:23:16,178 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in template
    {% and level  == '1' -%}
jinja2.exceptions.TemplateSyntaxError: Encountered unknown tag 'and'. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.

2021-01-20 15:23:16,179 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in template
    {% and level  == '1' -%}
jinja2.exceptions.TemplateSyntaxError: Encountered unknown tag 'and'. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.

2021-01-20 15:23:16,179 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in template
    {% and level  == '1' -%}
jinja2.exceptions.TemplateSyntaxError: Encountered unknown tag 'and'. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.

2021-01-20 15:23:16,179 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:23:16,180 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in template
    {% and level  == '1' -%}
jinja2.exceptions.TemplateSyntaxError: Encountered unknown tag 'and'. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.

2021-01-20 15:23:16,180 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 15, in template
    {% and level  == '1' -%}
jinja2.exceptions.TemplateSyntaxError: Encountered unknown tag 'and'. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.

2021-01-20 15:23:16,180 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:23:16,180 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:23:16,180 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:23:16,180 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:23:16,181 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:23:29,446 -  nornir.core -     INFO -        run() - Running task 'configuration' with args {} on 6 hosts
2021-01-20 15:23:29,467 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 26, in template
    set protocols mpls interface lo0.0
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.

2021-01-20 15:23:29,467 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 26, in template
    set protocols mpls interface lo0.0
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.

2021-01-20 15:23:29,467 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 628, in compile
    source = self._parse(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 539, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 937, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 919, in subparse
    rv = self.parse_statement()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 141, in parse_statement
    return getattr(self, "parse_" + self.stream.current.value)()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 222, in parse_if
    node.body = self.parse_statements(("name:elif", "name:else", "name:endif"))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 181, in parse_statements
    self.fail_eof(end_tokens)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 115, in fail_eof
    return self._fail_ut_eof(None, stack, lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 101, in _fail_ut_eof
    self.fail(" ".join(message), lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 64, in fail
    raise exc(msg, lineno, self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.
  File "_templates/junos/config.text", line 26

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 15:23:29,467 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 26, in template
    set protocols mpls interface lo0.0
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.

2021-01-20 15:23:29,468 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 628, in compile
    source = self._parse(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 539, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 937, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 919, in subparse
    rv = self.parse_statement()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 141, in parse_statement
    return getattr(self, "parse_" + self.stream.current.value)()
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 222, in parse_if
    node.body = self.parse_statements(("name:elif", "name:else", "name:endif"))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 181, in parse_statements
    self.fail_eof(end_tokens)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 115, in fail_eof
    return self._fail_ut_eof(None, stack, lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 101, in _fail_ut_eof
    self.fail(" ".join(message), lineno)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/parser.py", line 64, in fail
    raise exc(msg, lineno, self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.
  File "_templates/junos/config.text", line 26

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 830, in handle_exception
    from .debug import rewrite_traceback_stack
ImportError: cannot import name 'rewrite_traceback_stack' from partially initialized module 'jinja2.debug' (most likely due to a circular import) (/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/debug.py)

2021-01-20 15:23:29,468 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'Generate configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir_jinja2/plugins/tasks/template_file.py", line 42, in template_file
    t = env.get_template(template)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 883, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 857, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/loaders.py", line 127, in load
    code = environment.compile(source, name, filename)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 638, in compile
    self.handle_exception(source=source_hint)
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "_templates/junos/config.text", line 26, in template
    set protocols mpls interface lo0.0
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'elif' or 'else' or 'endif'. The innermost block that needs to be closed is 'if'.

2021-01-20 15:23:29,468 - nornir.core.task -    ERROR -      start() - Host 'vMX1': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:23:29,468 - nornir.core.task -    ERROR -      start() - Host 'vMX3': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:23:29,468 - nornir.core.task -    ERROR -      start() - Host 'vMX4': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:23:29,469 - nornir.core.task -    ERROR -      start() - Host 'vMX2': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:23:29,469 - nornir.core.task -    ERROR -      start() - Host 'vMX5': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


2021-01-20 15:23:29,469 - nornir.core.task -    ERROR -      start() - Host 'vMX6': task 'configuration' failed with traceback:
Traceback (most recent call last):
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 98, in start
    r = self.task(self, **self.params)
  File "/Users/cj/Documents/Git/netwrknerd/juniper-vlabs/nornir-napalm/configuration_dry_run.py", line 8, in configuration
    r = task.run(task=template_file, name="Generate configuration", template="config.text", path=f"_templates/{task.host.platform}")
  File "/Users/cj/.pyenv/versions/nornir-3.9.0/lib/python3.9/site-packages/nornir/core/task.py", line 168, in run
    raise NornirSubTaskError(task=run_task, result=r)
nornir.core.exceptions.NornirSubTaskError: Subtask: Generate configuration (failed)


